<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">

<!-- MOBILE STABILITY -->
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<title>BRK THE SILENCE</title>

<style>
*{box-sizing:border-box;margin:0;padding:0}

html,body{
height:100%;
overflow:hidden;
font-family:Arial, sans-serif;
background:#0b0b0b;
color:white;
}

/* LOGO */
.logo{
position:fixed;
top:18px;
left:0;
right:0;
text-align:center;
letter-spacing:4px;
font-size:13px;
cursor:pointer;
z-index:10;
}

/* CENTER HERO */
.heroWrap{
height:100%;
display:flex;
flex-direction:column;
justify-content:center;
align-items:center;
text-align:center;
padding:20px;
}

.hero h1{
font-size:28px;
background:linear-gradient(90deg,#ff7a18,#ff00c8,#00c6ff);
-webkit-background-clip:text;
-webkit-text-fill-color:transparent;
}

.hero p{
margin-top:10px;
color:#aaa;
font-size:14px;
}

.searchBox{
margin-top:28px;
width:100%;
max-width:420px;
display:flex;
border-radius:40px;
padding:2px;
background:linear-gradient(90deg,#ff7a18,#ff00c8,#00c6ff);
}

.searchBox input{
flex:1;
border:none;
outline:none;
padding:16px;
border-radius:40px;
background:#0b0b0b;
color:white;
font-size:14px;
}

.searchBox button{
background:none;
border:none;
color:white;
padding:0 18px;
cursor:pointer;
font-size:18px;
}

/* CHAT WINDOW */
.chatWindow{
display:none;
flex-direction:column;
height:100%;
padding-top:70px;
}

.backBtn{
max-width:650px;
margin:0 auto 10px;
padding-left:10px;
color:#ccc;
cursor:pointer;
font-size:14px;
}

.messages{
flex:1;
overflow-y:auto;
padding:0 14px 100px;
max-width:650px;
margin:auto;
width:100%;
}

.msg{
padding:12px 16px;
border-radius:16px;
margin:8px 0;
max-width:85%;
line-height:1.5;
font-size:14px;
white-space:pre-wrap;
}

.user{
background:#1f1f1f;
margin-left:auto;
}

.bot{
background:#141414;
border:1px solid #2a2a2a;
}

/* bottom input */
.chatInputWrap{
position:fixed;
bottom:0;
left:0;
right:0;
padding:12px;
background:#0b0b0b;
}

.chatInput{
max-width:650px;
margin:auto;
display:flex;
border-radius:40px;
padding:2px;
background:linear-gradient(90deg,#ff7a18,#ff00c8,#00c6ff);
}

.chatInput input{
flex:1;
border:none;
outline:none;
padding:16px;
border-radius:40px;
background:#0b0b0b;
color:white;
font-size:14px;
}

.chatInput button{
background:none;
border:none;
color:white;
padding:0 18px;
font-size:18px;
cursor:pointer;
}

/* footer line */
.tagline{
margin-top:18px;
font-size:12px;
color:#777;
}
</style>
</head>

<body>

<div class="logo" onclick="goHome()">BRK THE SILENCE</div>

<!-- HOME -->
<div class="heroWrap" id="home">
  <div class="hero">
    <h1>Empower your inner voice.</h1>
    <p>A quiet space to express what you usually keep inside.</p>
  </div>

  <div class="searchBox">
    <input id="homeInput" placeholder="What’s on your mind">
    <button onclick="startChat()">➤</button>
  </div>

  <div class="tagline">
    No Identity. No Judgement. Just Expression.
  </div>
</div>

<!-- CHAT -->
<div class="chatWindow" id="chat">
  <div class="backBtn" onclick="goHome()">← Back</div>
  <div class="messages" id="messages"></div>
</div>

<div class="chatInputWrap" id="chatBar" style="display:none">
  <div class="chatInput">
    <input id="chatInput" placeholder="Type your message">
    <button onclick="send()">➤</button>
  </div>
</div>

<script>
const home = document.getElementById("home");
const chat = document.getElementById("chat");
const chatBar = document.getElementById("chatBar");
const messages = document.getElementById("messages");

/* ENTER KEY SEND */
document.getElementById("homeInput").addEventListener("keydown", e=>{
 if(e.key==="Enter"){ startChat(); }
});

document.getElementById("chatInput").addEventListener("keydown", e=>{
 if(e.key==="Enter"){ send(); }
});

/* START CHAT */
function startChat(){
 const text = homeInput.value.trim();
 if(!text) return;

 home.style.display="none";
 chat.style.display="flex";
 chatBar.style.display="block";

 addMessage(text,"user");
 homeInput.value="";

 sendToAPI(text);

 setTimeout(()=>chatInput.focus(),300);
}

/* SEND MESSAGE */
function send(){
 const input=document.getElementById("chatInput");
 const text=input.value.trim();
 if(!text) return;

 addMessage(text,"user");
 input.value="";
 sendToAPI(text);
}

/* ADD MESSAGE */
function addMessage(text,type){
 const div=document.createElement("div");
 div.className="msg "+type;
 div.textContent=text;
 messages.appendChild(div);
 messages.scrollTop=messages.scrollHeight;
}

/* API CALL */
async function sendToAPI(text){
 addMessage("Thinking...","bot");

 const res = await fetch("/api/speak",{
  method:"POST",
  headers:{"Content-Type":"application/json"},
  body:JSON.stringify({message:text})
 });

 const data = await res.json();
 messages.lastChild.remove();
 addMessage(data.reply,"bot");
}

/* BACK HOME */
function goHome(){
 home.style.display="flex";
 chat.style.display="none";
 chatBar.style.display="none";
 messages.innerHTML="";
}
</script>
</body>
</html>
