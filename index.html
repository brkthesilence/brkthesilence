<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BRK THE SILENCE</title>

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
}

body{
  background:#0b0b0b;
  color:white;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
}

/* container */
.wrapper{
  width:100%;
  max-width:600px;
  height:100vh;
  display:flex;
  flex-direction:column;
  justify-content:space-between;
  padding:20px;
}

/* logo */
.logo{
  text-align:center;
  font-weight:600;
  letter-spacing:2px;
  margin-top:10px;
  cursor:pointer;
}

/* chat area */
.chat{
  flex:1;
  overflow-y:auto;
  padding:20px 0;
}

/* message bubbles */
.msg{
  max-width:80%;
  padding:12px 16px;
  border-radius:18px;
  margin:8px 0;
  line-height:1.4;
  font-size:15px;
}

.user{
  background:#1f1f1f;
  margin-left:auto;
}

.bot{
  background:#151515;
  border:1px solid #222;
}

/* input area */
.input-area{
  display:flex;
  gap:10px;
  align-items:center;
}

input{
  flex:1;
  padding:14px 18px;
  border-radius:30px;
  border:none;
  outline:none;
  background:#121212;
  color:white;
  font-size:16px;
}

button{
  padding:12px 18px;
  border:none;
  border-radius:30px;
  cursor:pointer;
  background:white;
  color:black;
  font-weight:500;
}

/* footer */
.footer{
  text-align:center;
  font-size:13px;
  color:#777;
  margin-top:10px;
  cursor:pointer;
}

/* T&C page */
.tc-page{
  display:none;
  height:100vh;
  overflow:auto;
}

.tc-content{
  max-width:700px;
  margin:auto;
  padding:30px 20px;
  line-height:1.6;
}

.back-btn{
  margin-bottom:20px;
  cursor:pointer;
  color:#aaa;
}

@media(max-width:600px){
  .wrapper{
    padding:15px;
  }
}
</style>
</head>

<body>

<div class="wrapper" id="mainPage">

  <div class="logo">BRK THE SILENCE</div>

  <div class="chat" id="chat"></div>

  <div class="input-area">
    <input id="msg" placeholder="What’s on your mind" autofocus>
    <button onclick="send()">Send</button>
  </div>

  <div class="footer" onclick="showTC()">
    No Identity. No Judgement. Just Expression. | T&C
  </div>

</div>

<!-- T&C PAGE -->
<div class="tc-page" id="tcPage">
  <div class="tc-content">
    <div class="back-btn" onclick="showHome()">← Back</div>

    <h2>BRK THE SILENCE</h2>
    <br>

    <p>This platform is a quiet space for expression.</p>
    <p>It is not therapy or crisis support.</p>
    <p>No identity is required. No data is sold.</p>
    <p>Please use respectfully and responsibly.</p>

  </div>
</div>

<script>
const input = document.getElementById("msg");
const chat = document.getElementById("chat");

/* send on ENTER */
input.addEventListener("keypress", function(e){
  if(e.key === "Enter"){
    send();
  }
});

async function send(){
  const text = input.value.trim();
  if(!text) return;

  addMessage(text,"user");
  input.value="";

  const loading = addMessage("...", "bot");

  try{
    const response = await fetch("/api/speak", {
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body:JSON.stringify({ message:text })
    });

    const data = await response.json();
    loading.textContent = data.reply;

  }catch{
    loading.textContent = "Connection issue. Please try again.";
  }
}

/* add chat bubble */
function addMessage(text,type){
  const div=document.createElement("div");
  div.className="msg "+type;
  div.textContent=text;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
  return div;
}

/* T&C toggle */
function showTC(){
  document.getElementById("mainPage").style.display="none";
  document.getElementById("tcPage").style.display="block";
}

function showHome(){
  document.getElementById("tcPage").style.display="none";
  document.getElementById("mainPage").style.display="flex";
}
</script>

</body>
</html>
